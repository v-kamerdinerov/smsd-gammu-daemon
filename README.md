# smsd-gammu-daemon

> –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫ Gammu SMS Daemon –Ω–∞ Raspberry Pi/Orange Pi —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–º–∞ 3G/4G –æ—Ç Huawei

## üì¶ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [üìù –ü—Ä–µ–∞–º–±—É–ª–∞](#-–ø—Ä–µ–∞–º–±—É–ª–∞)
- [‚öôÔ∏è –£ –Ω–∞—Å –±—ã–ª–æ...](#Ô∏è-—É-–Ω–∞—Å-–±—ã–ª–æ)
- [üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Gammu –≤—Ä—É—á–Ω—É—é](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-gammu-–≤—Ä—É—á–Ω—É—é)
  - [–®–∞–≥ 0: –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞](#—à–∞–≥-0-—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)
  - [–®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–µ–º–∞](#—à–∞–≥-1-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–º–æ–¥–µ–º–∞)
  - [–®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Gammu](#—à–∞–≥-2-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-gammu)
  - [–®–∞–≥ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Gammu](#—à–∞–≥-3-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-gammu)
- [‚öôÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å Ansible](#Ô∏è-–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è-—Å-ansible)
- [üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#-–ø–æ–ª–µ–∑–Ω—ã–µ-—Å–æ–≤–µ—Ç—ã-–∏-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
  - [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ udev –ø—Ä–∞–≤–∏–ª](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-udev-–ø—Ä–∞–≤–∏–ª)
- [‚ö†Ô∏è –û—à–∏–±–∫–∏ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#Ô∏è-–æ—à–∏–±–∫–∏-–∏-—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)
  - [–û—Ç–≤–∞–ª—ã](#-–æ—Ç–≤–∞–ª—ã-–º–æ–¥–µ–º–∞)

## üìù –ü—Ä–µ–∞–º–±—É–ª–∞

–û–¥–Ω–∞–∂–¥—ã –ø–µ—Ä–µ–¥–æ –º–Ω–æ–π –≤–æ–∑–Ω–∏–∫–ª–∞ –∑–∞–¥–∞—á–∞ ‚Äî –ø–æ–ª—É—á–∞—Ç—å –°–ú–° –Ω–∞ SIM-–∫–∞—Ä—Ç—É, –∫–æ—Ç–æ—Ä—É—é –Ω–µ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –Ω–æ—Å–∏—Ç—å —Å —Å–æ–±–æ–π –≤ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ. –í –º–æ–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –±—ã–ª–∞ SIM-–∫–∞—Ä—Ç–∞ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞, –∞ —Ç–∞–∫–∂–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –±–∞–Ω–∫–æ–≤. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–≤ —Å–∏—Ç—É–∞—Ü–∏—é –∏ –∏–º–µ—è –ø–æ–¥ —Ä—É–∫–æ–π —Å—Ç–∞—Ä—ã–π 3G-–º–æ–¥–µ–º –∏ –Ω–µ–¥–∞–≤–Ω–æ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–Ω—É—é `Orange Pi`, —è —Ä–µ—à–∏–ª –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –°–ú–° –∏ –ø–µ—Ä–µ—Å—ã–ª–∫–∏ –∏—Ö –≤ **Telegram**.

–ö–ª—é—á–æ–º –∫ —Ä–µ—à–µ–Ω–∏—é —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ —Å—Ç–∞–ª Gammu SMS Daemon, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ. –í —ç—Ç–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ —è —à–∞–≥ –∑–∞ —à–∞–≥–æ–º –ø–æ–∫–∞–∂—É, –∫–∞–∫ —è —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª, –∞ —Ç–∞–∫–∂–µ –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å –ø–æ–º–æ—â—å—é **Ansible**.

## ‚öôÔ∏è –£ –Ω–∞—Å –±—ã–ª–æ...

![—É-–Ω–∞—Å-–±—ã–ª–æ](https://avatars.mds.yandex.net/get-vthumb/2455229/ec6a9a38a6eef596fa8105ce9c74b794/800x450)

–ò—Ç–∞–∫, –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ–±–µ: –æ–¥–∏–Ω **–æ–¥–Ω–æ–ø–ª–∞—Ç–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä**, —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ —Å—Ç–∞—Ä–æ–≥–æ –¥—Ä—É–≥–∞, –∫–æ—Ç–æ—Ä—ã–π –ª–µ–∂–∞–ª –≤ —É–≥–ª—É, —Å–æ–±–∏—Ä–∞—è –ø—ã–ª—å. –û–¥–∏–Ω —Å—Ç–∞—Ä—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π –º–æ–¥–µ–º **–ú–µ–≥–∞—Ñ–æ–Ω –ï173** ‚Äî —Ç–æ—Ç —Å–∞–º—ã–π, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –¥–∞–≤–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è, –Ω–æ –≤—Å—ë –µ—â—ë —Ç—è–Ω–µ—Ç –∑–∞ —Å–æ–±–æ–π –∫–∞–∫–∏–µ-—Ç–æ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Å—Ç–∞—Ä—ã—Ö –≤—Ä–µ–º–µ–Ω–∞—Ö —Å–≤—è–∑–∏. –ò, –∫–æ–Ω–µ—á–Ω–æ –∂–µ, –≤–µ–ª–∏–∫–æ–µ –∏ –≤—Å–µ–ø–æ–≥–ª–æ—â–∞—é—â–µ–µ –∂–µ–ª–∞–Ω–∏–µ **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å** –ø—Ä–æ—Ü–µ—Å—Å. –í—Å—ë —ç—Ç–æ –≤–º–µ—Å—Ç–µ ‚Äî –≥–æ—Ç–æ–≤–∞—è —Å—Ü–µ–Ω–∞ –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ, –Ω–æ —ç–ø–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è.


## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Gammu –≤—Ä—É—á–Ω—É—é

### –®–∞–≥ 0: –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

–ï—Å–ª–∏ –≤–∞—à –º–æ–¥–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π ‚Äî –∫–∞–∫ –∏ –≤ –º–æ–µ–º —Å–ª—É—á–∞–µ, –µ–≥–æ –Ω—É–∂–Ω–æ –Ω–∞—É—á–∏—Ç—å —Ç–∞–π–Ω–æ–º—É –∫—É–Ω–≥-—Ñ—É ‚Äî —á–∏—Ç–∞—Ç—å SIM-–∫–∞—Ä—Ç—ã –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤. –≠—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –æ–∫–∞–∑–∞–ª—Å—è —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–º –¥–ª—è –º–æ–µ–π –º–æ–¥–µ–ª–∏, –≤–µ–¥—å –ø–æ–¥ –ª–∏—á–∏–Ω–æ–π **–ú–µ–≥–∞—Ñ–æ–Ω –ï173** —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–µ –∫—Ç–æ –∏–Ω–æ–π, –∫–∞–∫ **HUAWEI E173** ‚Äî –¥—Ä–µ–≤–Ω–µ–π—à–∏–π 3G-—Å–≤–∏—Å—Ç–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏–ª –¥–ª—è –º–æ–∏—Ö –∑–∞–¥–∞—á. –ö–∞–∫ —Å–º–µ–Ω–∏—Ç—å –µ–≥–æ –ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç—å –ú–µ–≥–∞—Ñ–æ–Ω—É, –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ [–Ω–∞ –Ω–µ–±–µ–∑—ã–∑–≤–µ—Å—Ç–Ω–æ–º —Ñ–æ—Ä—É–º–µ](https://4pda.to/forum/index.php?showtopic=256400).

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–µ–º–∞

1. –í—Å—Ç–∞–≤—å—Ç–µ –º–æ–¥–µ–º Huawei –≤ USB-–ø–æ—Ä—Ç –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—É:

```bash
  lsusb
```

–í –æ—Ç–≤–µ—Ç –≤—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å —á—Ç–æ-—Ç–æ –Ω–∞–ø–æ–¥–æ–±–∏–µ:

```bash
Bus 008 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 007 Device 003: ID 12d1:1001 Huawei Technologies Co., Ltd. E161/E169/E620/E800 HSDPA Modem
Bus 007 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
 ```

–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ, –º–æ–¥–µ–º –æ–ø—Ä–µ–¥–µ–ª–∏–ª—Å—è - –º—ã –∑–∞–ø–æ–º–Ω–∏–º –∏–∑ –¥–∞–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ manufacture id –¥–∞–Ω–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ - `12d1:1001`. `12d1` ‚Äî —ç—Ç–æ –∫–æ–¥ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –¥–ª—è Huawei, –∞ —Å—Ç—Ä–æ–∫–∞, –∏–¥—É—â–∞—è –∑–∞ —ç—Ç–∏–º –∫–æ–¥–æ–º (–≤ –º–æ—ë–º —Å–ª—É—á–∞–µ ‚Äî `1001`) ‚Äî —ç—Ç–æ ID –ø—Ä–æ–¥—É–∫—Ç–∞.
–ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞, –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º–æ–¥–µ–º–∞, —Å–æ–∑–¥–∞—Å—Ç /dev/ttyUSB0, —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤—Å—ë —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç–æ –º–æ–∂–µ–º —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥:

```bash
   dmesg | grep tty
[287645.840210] usb 7-1: GSM modem (1-port) converter now attached to ttyUSB1
[287645.876674] usb 7-1: GSM modem (1-port) converter now attached to ttyUSB2
[287645.913216] usb 7-1: GSM modem (1-port) converter now attached to ttyUSB3

   ls -al /dev/ttyUSB*
crw-rw---- 1 root dialout 188, 1 Feb  6 22:15 /dev/ttyUSB1
crw-rw---- 1 root dialout 188, 2 Feb  6 22:15 /dev/ttyUSB2
crw-rw---- 1 root dialout 188, 3 Feb 16 23:19 /dev/ttyUSB3
  ```

> [!NOTE]
> –ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º–æ–¥–µ–º–∞ —Å—Ç–æ–∏—Ç —Å—Ä–∞–∑—É –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `udev`-–ø—Ä–∞–≤–∏–ª–æ, —á—Ç–æ–±—ã –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å `ttyID`. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-udev-–ø—Ä–∞–≤–∏–ª).

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∞–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —á–∞—Å—Ç—å –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî Pi –∏ –º–æ–¥–µ–º ‚Äî –≥–æ—Ç–æ–≤–∞ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç–µ.

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ gammu

1. –ß–∞—â–µ –≤—Å–µ–≥–æ –æ–¥–Ω–æ–ø–ª–∞—Ç–Ω–∏–∫–∏ –ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ Debian/Ubuntu –ø–æ–¥–æ–±–Ω—ã—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö - –ø–æ—ç—Ç–æ–º—É —Å—Ç–∞–≤–∏–º –ø–∞–∫–µ—Ç—ã –¥–ª—è gammu –∏ –∏—Å–ø–æ–ª—å–∑—É—è –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä apt. –•–æ—Ä–æ—à–∏–º —Ç–æ–Ω–æ–º –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –û–°:

```bash
sudo apt update && sudo apt upgrade -y
```

2. –ò —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∞–º–∏—Ö –ø–∞–∫–µ—Ç–æ–≤:
```bash
sudo apt install gammu gammu-smsd -y
```

### –®–∞–≥ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Gammu

1. Gammu –æ–±–ª–∞–¥–∞–µ—Ç —à–∏—Ä–æ–∫–∏–º —Å–ø–µ–∫—Ç—Ä–æ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –ø–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—é —Å –º–æ–¥–µ–º–∞–º–∏ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏. –ù–∞–º –∂–µ –Ω—É–∂–µ–Ω —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ SMS —Å–æ–æ–±—â–µ–Ω–∏–π. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —Ç—Ä–∏–≤–∏–∞–ª–µ–Ω:

–õ–µ–∂–∏—Ç –ø–æ –ø—É—Ç–∏ - `/etc/gammu-smsdrc`
```shell
# Configuration file for Gammu SMS Daemon - –ø–æ–¥—Ä–æ–±–Ω–µ–µ https://docs.gammu.org/config/

[gammu]
port = /dev/sms # —Ç–æ—á–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –Ω–∞—à–µ–º—É –º–æ–¥–µ–º—É, –º—ã –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ –µ–µ –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º–æ–¥–µ–º–∞. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ttyUSB*, –Ω–æ –º–æ–≥—É—Ç –±—ã—Ç—å –∫–æ–ª–ª–∏–∑–∏–∏ ‚Äî —Å–º. –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
connection = at # —Ç–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –º–æ–¥–µ–º—É (AT-–∫–æ–º–∞–Ω–¥—ã)

[smsd]
service = files # —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã ‚Äî —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
logfile = syslog # –ø—É—Ç—å –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äî syslog (—Å–∏—Å—Ç–µ–º–Ω—ã–π –∂—É—Ä–Ω–∞–ª)
debuglevel = 1 # —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–æ–≤ (1 ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π, 255 ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π)
CheckSecurity = 0 # –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ PIN-–∫–æ–¥–∞ SIM-–∫–∞—Ä—Ç—ã

RunOnReceive = /opt/my-awesome-python-script.py # –ø—É—Ç—å –∫ —Å–∫—Ä–∏–ø—Ç—É, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ SMS

inboxpath = /var/spool/gammu/inbox/ # –ø–∞–ø–∫–∞ –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö SMS
outboxpath = /var/spool/gammu/outbox/ # –ø–∞–ø–∫–∞ –¥–ª—è SMS, –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ
sentsmspath = /var/spool/gammu/sent/ # –ø–∞–ø–∫–∞ –¥–ª—è —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö SMS
errorsmspath = /var/spool/gammu/error/ # –ø–∞–ø–∫–∞ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
```

2. –ü–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –º–æ–∂–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –º–æ–¥–µ–º–∞ –∏ —Å–≤—è–∑—å —É—Ç–∏–ª–∏—Ç—ã –∏ –Ω–∞—à–µ–≥–æ –º–æ–¥–µ–º–∞. –ï—Å–ª–∏ –≤—Å—ë –Ω–æ—Ä–º–∞–ª—å–Ω–æ ‚Äî –≤ –æ—Ç–≤–µ—Ç –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ:

  ```bash
  gammu -c gammu-smsdrc identify
Device               : /dev/sms
Manufacturer         : Huawei
Model                : E173 (E173)
Firmware             : 11.126.16.17.209
IMEI                 : 863448212120472
SIM IMSI             : 401770091187972
  ```

–ù–∞ —ç—Ç–æ–º —à–∞–≥–µ –º—ã –ø–æ–ª—É—á–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥–µ–º –∏ gammu –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞—à–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –ö–ª—é—á–µ–≤—ã–º —Ç—É—Ç —è–≤–ª—è–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç –∫–æ—Ç–æ—Ä—ã–π, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–æ–ª—É—á–µ–Ω–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ - `RunOnReceive = /var/lib/my-awesome-python-script.py`.

–ï–≥–æ –ø—Ä–∏–º–µ—Ä –º—ã –º–æ–∂–µ–º –Ω–∞–π—Ç–∏ —Ç—É—Ç - [sms-to-telegram-forwarder.py](./playbooks/roles/gammu-smsd/templates/sms-to-tg-fwdr.py). 

–í –Ω–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ª–∏—à—å —Å–ª–µ–¥—É—é—â–µ–µ - –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –¥–∞–Ω–Ω—ã–µ –Ω–∞—à–µ–≥–æ TG - –±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º—ã –∫–æ–Ω–µ—á–Ω–æ –∂–µ –∑–∞–±–ª–∞–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ [—Å–æ–∑–¥–∞–ª–∏ –∑–∞—Ä–∞–Ω–µ–µ.~–Ω–µ—Ç~](https://www.directual.com/lesson-library/how-to-create-a-telegram-bot)

  ```python
phone = "+79000000000"
CHAT_ID = "-667408572"
TOKEN = "337200:CoDeForMyAwEsOmEBoT"
  ```

3. –û—Å—Ç–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å systemd –¥–µ–º–æ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã gammu

  ```bash
systemctl start gammu-smsd.service
systemctl enable gammu-smsd.service
systemctl status gammu-smsd.service
‚óè gammu-smsd.service - SMS daemon for Gammu
     Loaded: loaded (/lib/systemd/system/gammu-smsd.service; enabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-17 10:46:30 MSK; 54min ago
       Docs: man:gammu-smsd(1)
    Process: 522079 ExecStart=/usr/bin/gammu-smsd --pid=/run/gammu-smsd.pid --daemon (code=exited, status=0/SUCCESS)
   Main PID: 522080 (gammu-smsd)
      Tasks: 1 (limit: 9040)
     Memory: 2.1M
        CPU: 1.230s
     CGroup: /system.slice/gammu-smsd.service
             ‚îî‚îÄ522080 /usr/bin/gammu-smsd --pid=/run/gammu-smsd.pid --daemon

Feb 17 10:46:30 orangepi5 gammu-smsd[522079]: mode: Send=1, Receive=1
Feb 17 10:46:30 orangepi5 gammu-smsd[522079]: deliveryreport = no
Feb 17 10:46:30 orangepi5 gammu-smsd[522079]: phoneid =
Feb 17 10:46:30 orangepi5 gammu-smsd[522079]: Inbox is "/var/spool/gammu/inbox/" with format "standard"
Feb 17 10:46:30 orangepi5 gammu-smsd[522079]: Outbox is "/var/spool/gammu/outbox/" with format "detail" and transmission format "7bit"
Feb 17 10:46:30 orangepi5 gammu-smsd[522079]: Sent SMS moved to "/var/spool/gammu/sent/"
Feb 17 10:46:30 orangepi5 gammu-smsd[522079]: SMS with errors moved to "/var/spool/gammu/error/"
Feb 17 10:46:30 orangepi5 gammu-smsd[522080]: Created POSIX RW shared memory at 0x7fa2728000
Feb 17 10:46:30 orangepi5 gammu-smsd[522080]: Starting phone communication...
Feb 17 10:46:30 orangepi5 systemd[1]: Started SMS daemon for Gammu.
  ```

4. –ü—Ä–æ–≤–µ—Ä–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –ª—é–±–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –≤–∞—à –Ω–æ–º–µ—Ä –∏ —Ç—Ä–µ–ø–µ—Ç–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –µ–≥–æ –≤ –≤–∞—à–µ–º –¢–ì –∫–∞–Ω–∞–ª–µ

![message](./imgs/message.png)

## ‚öôÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å Ansible

–ï—Å–ª–∏ –≤–∞—Å –Ω–µ –ø—É–≥–∞—é—Ç —Å–ª–æ–≤–∞ - –ø–ª–µ–π–±—É–∫, ansible, –∏–Ω–≤–µ–Ω—Ç–æ—Ä–∏ - –≤—ã –ø–æ –∞–¥—Ä–µ—Å—É. –ü–æ—Å–ª–µ –∫–ª–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –º–æ–∂–Ω–æ –ø—Ä–æ–≥–Ω–∞—Ç—å –ø–ª–µ–π–±—É–∫ –∏ –ø–æ–ª—É—á–∏—Ç—å –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω—É—é –∏–Ω—Å—Ç–∞–ª—è—Ü–∏—é, –Ω–æ —É–∂–µ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∏.
–í–∞–∂–Ω–æ - –∑–∞–ø–æ–ª–Ω–∏—Ç—å group_vars - –≤ –Ω–∏—Ö —É–∫–∞–∂–µ–º —Ç–∞–∫ –∂–µ —Ç–æ–∫–µ–Ω –æ—Ç –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞ –∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ –∂–µ–ª–∞–Ω–∏—é.

```bash
cd playbooks/ 
ansible-playbook gammu.yml
```


## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ udev –ø—Ä–∞–≤–∏–ª

–£ –º–æ–¥–µ–º–æ–≤ –µ—Å—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ - –º–µ–Ω—è—Ç—å —Å–≤–æ–π ttyID –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ñ–∞–∑—ã –ª—É–Ω—ã, —Å–æ–ª–Ω—Ü–µ—Å—Ç–æ—è–Ω–∏—è –∏ –∫—É—Ä—Å–∞ –¥–æ–ª–ª–∞—Ä–∞. –•–æ—Ä–æ—à–∏–º —Ä–µ—à–µ–Ω–∏–µ–º –±—É–¥–µ—Ç –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Å–∞–º—ã–π ttyID —Å –ø–æ–º–æ—â—å—é –ø—Ä–∞–≤–∏–ª udev. –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –º–æ–¥–µ–º–∞ –∫ –æ–¥–Ω–æ–ø–ª–∞—Ç–Ω–∏–∫—É –º—ã –≤—ã—è—Å–Ω–∏–ª–∏ manufacture id –Ω–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

```bash
Bus 008 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 007 Device 003: ID 12d1:1001 Huawei Technologies Co., Ltd. E161/E169/E620/E800 HSDPA Modem
Bus 007 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
```

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª –ø–æ –ø—É—Ç–∏ `/etc/udev/rules.d/55-USB-modems.rules` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º:

```bash
# idVendor           0x12d1 Huawei Technologies Co., Ltd.
# idProduct          0x1001 E169/E620/E800 HSDPA Modem
SUBSYSTEM=="tty", ATTRS{idVendor}=="12d1", ATTRS{idProduct}== "1001", SYMLINK+="sms"
```

–°–ª–µ–¥—É—é—â–∏–º –ø—Ä–∞–≤–∏–ª–æ–º –º—ã –≥–æ–≤–æ—Ä–∏–º —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–µ–Ω–¥–æ—Ä–∞ Huawei –∏ –ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º id —Å—Ç–æ–∏—Ç –≤–µ—à–∞—Ç—å –Ω–∞ —Å–∏–º–ª–∏–Ω–∫ `/dev/sms`.

–¢–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω–∏–º —Ä–µ–ª–æ–∞–¥ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª:

```bash
udevadm control --reload-rules
udevadm trigger
```

–ü–æ –ø—É—Ç–∏ `/dev/sms` –º—ã –¥–æ–ª–∂–Ω—ã –∑–∞–±–ª—é–¥–∞—Ç—å —Å–∏–º–ª–∏–Ω–∫ –Ω–∞ ttyd –æ—Ç –º–æ–¥–µ–º–∞:

```bash
ls -hal /dev/sms
lrwxrwxrwx 1 root root 7 Feb 17 10:41 /dev/sms -> ttyUSB3
```

## ‚ö†Ô∏è –û—à–∏–±–∫–∏ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—Ç–≤–∞–ª—ã –º–æ–¥–µ–º–∞

–ò–Ω–æ–≥–¥–∞ - –º–æ–∂–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –ø–æ—Ç–µ—Ä—è —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–º–∞ - –∏ –Ω–∞—à–µ–≥–æ –æ–¥–Ω–æ–ø–ª–∞—Ç–Ω–∏–∫–∞.

–ü–æ—Ä–æ–π —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –ø–æ—Ç–µ—Ä–µ–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –ø–æ—Ä–æ–π —Å –≤–æ–ª—à–µ–±–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–µ–º–∞ - –æ—Ç–≤–∞–ª—ã –Ω–∞–±–ª—é–¥–∞—é—Ç—Å—è –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö systemd - `gammu-smsd`:

```bash
    "Probably the phone is not connected. (TIMEOUT[14])"
    "Error at init connection:"
    "Error getting SMS status:"
```

–ü—Ä–∏ —ç—Ç–æ–º —Ä–µ—Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞ systemd –Ω–∞–º –Ω–µ –ø–æ–º–æ–∂–µ—Ç ‚Äî –º–æ–≥–ª–∞ –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –ø–æ—Ç–µ—Ä—è —Å–≤—è–∑–∏ —Å —Å–∞–º–∏–º –º–æ–¥–µ–º–æ–º, –∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å –º–æ–¥–µ–º, —á—Ç–æ —á–∞—â–µ –≤—Å–µ–≥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, –≤–µ–¥—å —É –Ω–∞—Å HAA-—Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –∂–∏–≤—ë—Ç —Å–∞–º–∞ –ø–æ —Å–µ–±–µ!

–†–µ—à–µ–Ω–∏–µ–º —Å—Ç–∞–ª –Ω–µ–º–Ω–æ–≥–æ –∫–æ—Å—Ç—ã–ª—å–Ω—ã–π, –Ω–æ –∑–∞—Ç–æ –Ω–∞–¥—ë–∂–Ω—ã–π, –∫–∞–∫ –∞–≤—Ç–æ–º–∞—Ç –ö–∞–ª–∞—à–Ω–∏–∫–æ–≤–∞, —Å–µ—Ä–≤–∏—Å ‚Äî `watcher`. –ï–≥–æ –∫–æ–¥ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∑–¥–µ—Å—å: [watcher.py](./playbooks/roles/gammu-smsd/files/watcher.py).

–î–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –ª–æ–≥ —Å –º–æ–º–µ–Ω—Ç–∞ –∑–∞–ø—É—Å–∫–∞ –¥–µ–º–æ–Ω–∞ `gammu-smsd` –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤—ã—à–µ –æ—à–∏–±–æ–∫. –ï—Å–ª–∏ –æ–Ω –∏—Ö –Ω–∞—Ö–æ–¥–∏—Ç, —Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ "–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ" –º–æ–¥–µ–º–∞ —á–µ—Ä–µ–∑ USB-—Ä–∞–∑—ä—ë–º –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–∏—Å `gammu-smsd` –≤ systemd.

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è systemd-—é–Ω–∏—Ç –∏ —Ç–∞–π–º–µ—Ä –¥–ª—è –Ω–µ–≥–æ:

`/etc/systemd/system/watcher.service`

```bash
[Unit]
Description=Watcher Service
After=network.target gammu-smsd.service

[Service]
Type=simple
ExecStart=/usr/bin/python3 /opt/watcher.py

[Install]
WantedBy=multi-user.targe
```

`/etc/systemd/system/watcher.timer`

```bash
[Unit]
Description=Watcher Timer

[Timer]
OnCalendar=*:0/15

[Install]
WantedBy=timers.target
```

### –ú–æ–¥–µ–º –Ω–µ –≤–∏–¥–Ω–æ –≤ —Å–∏—Å—Ç–µ–º–µ

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ USB-–º–æ–¥–µ–º–æ–≤ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –∫–æ–º–ø—å—é—Ç–µ—Ä—É, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ä–µ–∂–∏–º–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (storage mode), –∞ –Ω–∞–º –Ω—É–∂–µ–Ω —Ä–µ–∂–∏–º –º–æ–¥–µ–º–∞ (modem mode). –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –≤ –∫–∞–∫–æ–º –∏–º–µ–Ω–Ω–æ —Ä–µ–∂–∏–º–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–∞—à –º–æ–¥–µ–º ‚Äî –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –µ–≥–æ –∫ –Ω–∞—Å—Ç–æ–ª—å–Ω–æ–º—É –∫–æ–º–ø—å—é—Ç–µ—Ä—É. –ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –µ–≥–æ –≤ –≤–∏–¥–µ USB-–¥–∏—Å–∫–∞ (–æ–±—ã—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∏ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º –∏ –¥—Ä–∞–π–≤–µ—Ä–æ–≤) ‚Äî –≤–∞–º –Ω–∞–¥–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –µ–≥–æ –≤ —Ä–µ–∂–∏–º –º–æ–¥–µ–º–∞.

–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–æ–¥–µ–º–∞—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–µ–º–Ω–æ–≥–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É. –û–±—ã—á–Ω–æ —ç—Ç–æ —Ä–µ—à–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π:

```bash
usb_modeswitch -W -v 12d1 -p 1001 -K -P 14ac -M "55534243000000000000000000000011060000000000000000000000000000"
```

–ò —á—É—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ:

```bash
-v: Vendor ID
-p: Product ID
-M: –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —É–ø—Ä–∞–≤–ª—è—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ (Huawei Modeswitch Message)
```

–õ–∏–±–æ –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ, —á—Ç–æ–±—ã –¥–µ–ª–∞—Ç—å —ç—Ç–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏:

```bash
vi /etc/usb_modeswitch.d/12d1:1446

DefaultVendor=0x12d1
DefaultProduct=0x1446
TargetVendor=0x12d1
TargetProduct=0x1506
MessageContent="55534243123456780000000000000011062000000100000000000000000000"
```

–ò –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–º —Å–µ—Ä–≤–∏—Å usb_modeswitch

```bash
sudo systemctl restart usb_modeswitch
```

