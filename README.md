# smsd-gammu-daemon

> –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫ Gammu SMS Daemon –Ω–∞ Raspberry Pi/Orange Pi —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–º–∞ 3G/4G –æ—Ç Huawei

## üì¶ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ü—Ä–µ–∞–º–±—É–ª–∞](#-–ø—Ä–µ–∞–º–±—É–ª–∞)
- [–£ –Ω–∞—Å –±—ã–ª–æ...](#-—É-–Ω–∞—Å-–±—ã–ª–æ)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Gammu –≤—Ä—É—á–Ω—É—é](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-gammu-–≤—Ä—É—á–Ω—É—é)
  - [–®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–µ–º–∞](#—à–∞–≥-1-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–º–æ–¥–µ–º–∞)
  - [–®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Gammu](#—à–∞–≥-2-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-gammu)
  - [–®–∞–≥ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Gammu](#—à–∞–≥-3-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-gammu)
  - [–®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—à–∞–≥-4-–∑–∞–ø—É—Å–∫-–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å Ansible](#–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è-—Å-ansible)
  - [–®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ansible](#—à–∞–≥-1-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-ansible)
  - [–®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Ansible Playbook](#—à–∞–≥-2-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-ansible-playbook)
  - [–®–∞–≥ 3: –ó–∞–ø—É—Å–∫ Playbook](#—à–∞–≥-3-–∑–∞–ø—É—Å–∫-playbook)
- [–ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#–ø–æ–ª–µ–∑–Ω—ã–µ-—Å–æ–≤–µ—Ç—ã-–∏-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
- [–û—à–∏–±–∫–∏ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#–æ—à–∏–±–∫–∏-–∏-—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

## üìù –ü—Ä–µ–∞–º–±—É–ª–∞

–û–¥–Ω–∞–∂–¥—ã –ø–µ—Ä–µ–¥–æ –º–Ω–æ–π –≤–æ–∑–Ω–∏–∫–ª–∞ –∑–∞–¥–∞—á–∞ ‚Äî –ø–æ–ª—É—á–∞—Ç—å –°–ú–° –Ω–∞ SIM-–∫–∞—Ä—Ç—É, –∫–æ—Ç–æ—Ä—É—é –Ω–µ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –Ω–æ—Å–∏—Ç—å —Å —Å–æ–±–æ–π –≤ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ. –í –º–æ–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –±—ã–ª–∞ SIM-–∫–∞—Ä—Ç–∞ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞, –∞ —Ç–∞–∫–∂–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –±–∞–Ω–∫–æ–≤. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–≤ —Å–∏—Ç—É–∞—Ü–∏—é –∏ –∏–º–µ—è –ø–æ–¥ —Ä—É–∫–æ–π —Å—Ç–∞—Ä—ã–π 3G-–º–æ–¥–µ–º –∏ –Ω–µ–¥–∞–≤–Ω–æ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–Ω—É—é `Orange Pi`, —è —Ä–µ—à–∏–ª –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –°–ú–° –∏ –ø–µ—Ä–µ—Å—ã–ª–∫–∏ –∏—Ö –≤ **Telegram**.

–ö–ª—é—á–æ–º –∫ —Ä–µ—à–µ–Ω–∏—é —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ —Å—Ç–∞–ª Gammu SMS Daemon, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ. –í —ç—Ç–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ —è —à–∞–≥ –∑–∞ —à–∞–≥–æ–º –ø–æ–∫–∞–∂—É, –∫–∞–∫ —è —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª, –∞ —Ç–∞–∫–∂–µ –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å –ø–æ–º–æ—â—å—é **Ansible**.

## ‚öôÔ∏è –£ –Ω–∞—Å –±—ã–ª–æ...

![—É-–Ω–∞—Å-–±—ã–ª–æ](https://avatars.mds.yandex.net/get-vthumb/2455229/ec6a9a38a6eef596fa8105ce9c74b794/800x450)

–ò—Ç–∞–∫, –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ–±–µ: –æ–¥–∏–Ω **–æ–¥–Ω–æ–ø–ª–∞—Ç–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä**, —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ —Å—Ç–∞—Ä–æ–≥–æ –¥—Ä—É–≥–∞, –∫–æ—Ç–æ—Ä—ã–π –ª–µ–∂–∞–ª –≤ —É–≥–ª—É, —Å–æ–±–∏—Ä–∞—è –ø—ã–ª—å. –û–¥–∏–Ω —Å—Ç–∞—Ä—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π –º–æ–¥–µ–º **–ú–µ–≥–∞—Ñ–æ–Ω –ï173** ‚Äî —Ç–æ—Ç —Å–∞–º—ã–π, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –¥–∞–≤–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è, –Ω–æ –≤—Å—ë –µ—â—ë —Ç—è–Ω–µ—Ç –∑–∞ —Å–æ–±–æ–π –∫–∞–∫–∏–µ-—Ç–æ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Å—Ç–∞—Ä—ã—Ö –≤—Ä–µ–º–µ–Ω–∞—Ö —Å–≤—è–∑–∏. –ò, –∫–æ–Ω–µ—á–Ω–æ –∂–µ, –≤–µ–ª–∏–∫–æ–µ –∏ –≤—Å–µ–ø–æ–≥–ª–æ—â–∞—é—â–µ–µ –∂–µ–ª–∞–Ω–∏–µ **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å** –ø—Ä–æ—Ü–µ—Å—Å. –í—Å—ë —ç—Ç–æ –≤–º–µ—Å—Ç–µ ‚Äî –≥–æ—Ç–æ–≤–∞—è —Å—Ü–µ–Ω–∞ –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ, –Ω–æ —ç–ø–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è.


## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Gammu –≤—Ä—É—á–Ω—É—é

### –®–∞–≥ 0: –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

–ï—Å–ª–∏ –≤–∞—à –º–æ–¥–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π ‚Äî –∫–∞–∫ –∏ –≤ –º–æ–µ–º —Å–ª—É—á–∞–µ, –µ–≥–æ –Ω—É–∂–Ω–æ –Ω–∞—É—á–∏—Ç—å —Ç–∞–π–Ω–æ–º—É –∫—É–Ω–≥-—Ñ—É ‚Äî —á–∏—Ç–∞—Ç—å SIM-–∫–∞—Ä—Ç—ã –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤. –≠—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –æ–∫–∞–∑–∞–ª—Å—è —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–º –¥–ª—è –º–æ–µ–π –º–æ–¥–µ–ª–∏, –≤–µ–¥—å –ø–æ–¥ –ª–∏—á–∏–Ω–æ–π **–ú–µ–≥–∞—Ñ–æ–Ω –ï173** —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–µ –∫—Ç–æ –∏–Ω–æ–π, –∫–∞–∫ **HUAWEI E173** ‚Äî –¥—Ä–µ–≤–Ω–µ–π—à–∏–π 3G-—Å–≤–∏—Å—Ç–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏–ª –¥–ª—è –º–æ–∏—Ö –∑–∞–¥–∞—á. –ö–∞–∫ —Å–º–µ–Ω–∏—Ç—å –µ–≥–æ –ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç—å –ú–µ–≥–∞—Ñ–æ–Ω—É, –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ [–Ω–∞ –Ω–µ–±–µ–∑—ã–∑–≤–µ—Å—Ç–Ω–æ–º —Ñ–æ—Ä—É–º–µ](https://4pda.to/forum/index.php?showtopic=256400).

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–µ–º–∞

1. –í—Å—Ç–∞–≤—å—Ç–µ –º–æ–¥–µ–º Huawei –≤ USB-–ø–æ—Ä—Ç –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—É:

   ```bash
   lsusb
   ```

–í –æ—Ç–≤–µ—Ç –≤—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å —á—Ç–æ-—Ç–æ –Ω–∞–ø–æ–¥–æ–±–∏–µ:

```bash
Bus 008 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 007 Device 003: ID 12d1:1001 Huawei Technologies Co., Ltd. E161/E169/E620/E800 HSDPA Modem
Bus 007 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
```

–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ –º–æ–¥–µ–º –æ–ø—Ä–µ–¥–µ–ª–∏–ª—Å—è - –º—ã –∑–∞–ø–æ–º–Ω–∏–º –∏–∑ –¥–∞–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ manufacture id –¥–∞–Ω–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ - `12d1:1001`. `12d1` ‚Äî —ç—Ç–æ –∫–æ–¥ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –¥–ª—è Huawei, –∞ —Å—Ç—Ä–æ–∫–∞, –∏–¥—É—â–∞—è –∑–∞ —ç—Ç–∏–º –∫–æ–¥–æ–º (–≤ –º–æ—ë–º —Å–ª—É—á–∞–µ ‚Äî `1001`) ‚Äî —ç—Ç–æ ID –ø—Ä–æ–¥—É–∫—Ç–∞.
–ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞, –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º–æ–¥–µ–º–∞, —Å–æ–∑–¥–∞—Å—Ç /dev/ttyUSB0, —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤—Å—ë —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç–æ –º–æ–∂–µ–º —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥:

   ```bash
   dmesg | grep tty
[287645.840210] usb 7-1: GSM modem (1-port) converter now attached to ttyUSB1
[287645.876674] usb 7-1: GSM modem (1-port) converter now attached to ttyUSB2
[287645.913216] usb 7-1: GSM modem (1-port) converter now attached to ttyUSB3
   ls -al /dev/ttyUSB*
crw-rw---- 1 root dialout 188, 1 Feb  6 22:15 /dev/ttyUSB1
crw-rw---- 1 root dialout 188, 2 Feb  6 22:15 /dev/ttyUSB2
crw-rw---- 1 root dialout 188, 3 Feb 16 23:19 /dev/ttyUSB3
   ```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∞–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —á–∞—Å—Ç—å –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî Pi –∏ –º–æ–¥–µ–º ‚Äî –≥–æ—Ç–æ–≤–∞ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç–µ.

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ gammu

## ‚öôÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å Ansible
## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
## ‚ö†Ô∏è –û—à–∏–±–∫–∏ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫